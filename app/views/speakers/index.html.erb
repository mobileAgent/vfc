<% title("Speakers") %>
<% @letter = '!' %>
<%= link_to "View as Tag Cloud", :action => :index, :view => :cloud %>
<% if session[:user] && session[:user].admin? %>
  <%= link_to "New speaker", :action => :new %>
  <% admin = true %>
<% end %>  
<% @speakers.each do |speaker| %>
  <% if @letter != speaker.index_letter %>
    <% @letter = speaker.index_letter %>
    <% if @letter != '!'  %>
      </ul>
    <% end %>
    <%= render :partial => 'shared/alphaindex', :locals => { :skip_top_link => @letter == 'A', :current_letter => @letter } %>
    <ul>
  <% end %>
  <li>
    <%- # careful this is the cache ostruct, not a real speaker ar object -%>
    <%= speaker.catalog_name %>
      ~ <%= link_to pluralize(speaker.count,'message'), "/speakers/show/#{speaker.speaker_id}" %>
      <% if admin %>
        (<%= link_to "edit", :action => :edit, :id => speaker.speaker_id %>)
      <% end %>
  </li>
<% end %>
</ul>
